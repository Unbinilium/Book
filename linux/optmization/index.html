<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Optimization | Unbinilium&#39;s üìñ</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="manifest" href="/manifest.json" crossorigin="use-credentials">
    <link rel="shortcut icon" type="image/png" href="/favicon.png">
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
    <meta name="description" content="Unbinilium's personal knowledge book">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="msapplication-TileColor" content="#fff">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon.png">
    <meta property="og:title" content="Unbinilium's üìñ">
    <meta property="og:description" content="Unbinilium's personal knowledge book">
    <meta property="og:url" content="https://xn--vt8h.unbinilium.me/">
    <meta property="og:image" content="https://xn--vt8h.unbinilium.me/open_graph_logo.png">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Unbinilium's üìñ">
    
    <link rel="preload" href="/assets/css/0.styles.c86a7820.css" as="style"><link rel="preload" href="/assets/js/app.041ccf91.js" as="script"><link rel="preload" href="/assets/js/2.30d40f56.js" as="script"><link rel="preload" href="/assets/js/21.811b4ca6.js" as="script"><link rel="preload" href="/assets/js/3.9032db0e.js" as="script"><link rel="prefetch" href="/assets/js/10.469d6b72.js"><link rel="prefetch" href="/assets/js/11.c6524284.js"><link rel="prefetch" href="/assets/js/12.ce88ebf9.js"><link rel="prefetch" href="/assets/js/13.ab2b84d3.js"><link rel="prefetch" href="/assets/js/14.fe038601.js"><link rel="prefetch" href="/assets/js/15.a0555c26.js"><link rel="prefetch" href="/assets/js/16.f55579dd.js"><link rel="prefetch" href="/assets/js/17.ebad19b1.js"><link rel="prefetch" href="/assets/js/18.fadf84da.js"><link rel="prefetch" href="/assets/js/19.43a71af3.js"><link rel="prefetch" href="/assets/js/20.946ff141.js"><link rel="prefetch" href="/assets/js/22.4d4a6949.js"><link rel="prefetch" href="/assets/js/23.db0b25e6.js"><link rel="prefetch" href="/assets/js/24.63f564f1.js"><link rel="prefetch" href="/assets/js/25.ef3461c4.js"><link rel="prefetch" href="/assets/js/26.6354f890.js"><link rel="prefetch" href="/assets/js/27.1b44817a.js"><link rel="prefetch" href="/assets/js/28.30ebeba7.js"><link rel="prefetch" href="/assets/js/29.fd0c526c.js"><link rel="prefetch" href="/assets/js/30.3294a55b.js"><link rel="prefetch" href="/assets/js/4.5e92b263.js"><link rel="prefetch" href="/assets/js/5.665901b5.js"><link rel="prefetch" href="/assets/js/6.6ba3b61b.js"><link rel="prefetch" href="/assets/js/7.d31a3cd7.js"><link rel="prefetch" href="/assets/js/8.d4661bf2.js"><link rel="prefetch" href="/assets/js/9.168171d4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c86a7820.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Unbinilium's üìñ</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link router-link-active">
  Book
</a></div><div class="nav-item"><a href="https://unbinilium.me/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link router-link-active">
  Book
</a></div><div class="nav-item"><a href="https://unbinilium.me/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Coding</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Programming</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Security</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Software</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Linux</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/linux/command/" class="sidebar-link">Command</a></li><li><a href="/linux/networking/" class="sidebar-link">Networking</a></li><li><a href="/linux/optmization/" aria-current="page" class="active sidebar-link">Optimization</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linux/optmization/#update-ubuntu-kernel" class="sidebar-link">Update Ubuntu kernel</a></li><li class="sidebar-sub-header"><a href="/linux/optmization/#enlarge-file-limit" class="sidebar-link">Enlarge file limit</a></li><li class="sidebar-sub-header"><a href="/linux/optmization/#cmake-multi-cores" class="sidebar-link">CMake multi-cores</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Design</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Writing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Collection</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>See Also</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="update-ubuntu-kernel"><a href="#update-ubuntu-kernel" class="header-anchor">#</a> Update Ubuntu kernel</h2> <p>For Ubuntu users who wandering to support newer versions of hardware or getting new features, it's recommend to update Ubuntu kernel. We could do it by command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> updatekernel.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> u+x updatekernel.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> updatekernel.sh
</code></pre></div><p>This will create a shell script named <code>updatekernel.sh</code> in current folder and you're suppose to paste the code below before it got saved. Then it automatically set executable permission and run to update your Ubuntu kernel to the newest version.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">KERNELVER</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- http://kernel.ubuntu.com/~kernel-ppa/mainline/ <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'<span class="token entity" title="\&quot;">\&quot;</span>v'</span> <span class="token string">'/v[4-9]./{print <span class="token variable">$2</span>}'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d/ -f1 <span class="token operator">|</span> <span class="token function">grep</span> -v -  <span class="token operator">|</span> <span class="token function">sort</span> -V <span class="token operator">|</span> <span class="token function">tail</span> -1<span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">SYSTYPE</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>dpkg --print-architecture<span class="token variable">)</span></span>&quot;</span>
<span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$SYSTYPE</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;amd64&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">KERNEL</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- http://kernel.ubuntu.com/~kernel-ppa/mainline/v$<span class="token punctuation">{</span>KERNELVER<span class="token punctuation">}</span>/ <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;linux-image&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;generic&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'<span class="token entity" title="\&quot;">\&quot;</span>&gt;'</span> <span class="token string">'/amd64.deb/{print <span class="token variable">$2</span>}'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">'&lt;'</span> -f1 <span class="token operator">|</span> <span class="token function">head</span> -1<span class="token variable">)</span></span>&quot;</span>
<span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$SYSTYPE</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;i386&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">KERNEL</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- http://kernel.ubuntu.com/~kernel-ppa/mainline/v$<span class="token punctuation">{</span>KERNELVER<span class="token punctuation">}</span>/ <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;linux-image&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;generic&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'<span class="token entity" title="\&quot;">\&quot;</span>&gt;'</span> <span class="token string">'/i386.deb/{print <span class="token variable">$2</span>}'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">'&lt;'</span> -f1 <span class="token operator">|</span> <span class="token function">head</span> -1<span class="token variable">)</span></span>&quot;</span>
<span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$SYSTYPE</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;armhf&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">KERNEL</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- http://kernel.ubuntu.com/~kernel-ppa/mainline/v$<span class="token punctuation">{</span>KERNELVER<span class="token punctuation">}</span>/ <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;linux-image&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;generic&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'<span class="token entity" title="\&quot;">\&quot;</span>&gt;'</span> <span class="token string">'/armhf.deb/{print <span class="token variable">$2</span>}'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">'&lt;'</span> -f1 <span class="token operator">|</span> <span class="token function">head</span> -1<span class="token variable">)</span></span>&quot;</span>
<span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$SYSTYPE</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;arm64&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">KERNEL</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- http://kernel.ubuntu.com/~kernel-ppa/mainline/v$<span class="token punctuation">{</span>KERNELVER<span class="token punctuation">}</span>/ <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;linux-image&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;generic&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'<span class="token entity" title="\&quot;">\&quot;</span>&gt;'</span> <span class="token string">'/arm64.deb/{print <span class="token variable">$2</span>}'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">'&lt;'</span> -f1 <span class="token operator">|</span> <span class="token function">head</span> -1<span class="token variable">)</span></span>&quot;</span>
<span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$SYSTYPE</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;ppc64el&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">KERNEL</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- http://kernel.ubuntu.com/~kernel-ppa/mainline/v$<span class="token punctuation">{</span>KERNELVER<span class="token punctuation">}</span>/ <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;linux-image&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;generic&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'<span class="token entity" title="\&quot;">\&quot;</span>&gt;'</span> <span class="token string">'/ppc64el.deb/{print <span class="token variable">$2</span>}'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">'&lt;'</span> -f1 <span class="token operator">|</span> <span class="token function">head</span> -1<span class="token variable">)</span></span>&quot;</span>
<span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$SYSTYPE</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;s390x&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">KERNEL</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- http://kernel.ubuntu.com/~kernel-ppa/mainline/v$<span class="token punctuation">{</span>KERNELVER<span class="token punctuation">}</span>/ <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;linux-image&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;generic&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'<span class="token entity" title="\&quot;">\&quot;</span>&gt;'</span> <span class="token string">'/s390x.deb/{print <span class="token variable">$2</span>}'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">'&lt;'</span> -f1 <span class="token operator">|</span> <span class="token function">head</span> -1<span class="token variable">)</span></span>&quot;</span>
<span class="token function">wget</span> -t <span class="token number">3</span> -T <span class="token number">30</span> -nv -O <span class="token string">&quot;<span class="token variable">$KERNEL</span>&quot;</span> <span class="token string">&quot;http://kernel.ubuntu.com/~kernel-ppa/mainline/v<span class="token variable">${KERNELVER}</span>/<span class="token variable">${KERNEL}</span>&quot;</span>
dpkg -i <span class="token variable">$KERNEL</span>
<span class="token function">rm</span> -f <span class="token variable">$KERNEL</span>
<span class="token function">update-grub</span>
<span class="token function">apt-get</span> autoremove -y
</code></pre></div><p>By default we use command to find the newest compiled kernel by Ubuntu official:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">wget</span> -qO- http://kernel.ubuntu.com/~kernel-ppa/mainline/ <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'<span class="token entity" title="\&quot;">\&quot;</span>v'</span> <span class="token string">'/v[4-9]./{print <span class="token variable">$2</span>}'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d/ -f1 <span class="token operator">|</span> <span class="token function">grep</span> -v - <span class="token operator">|</span> <span class="token function">sort</span> -V <span class="token operator">|</span> <span class="token function">tail</span> -1
</code></pre></div><p>The architecture supported by Ubuntu kernel official compiled are <code>amd64</code>, <code>i386</code>, <code>armhf</code>, <code>arm64</code>, <code>ppc64el</code> and <code>s390x</code>. For some specially use such as low-latency required image or audio processing, replace the <code>grep &quot;generic&quot;</code> with <code>grep &quot;lowlatency&quot;</code>.</p> <p>Pay attention to the last line <code>apt-get autoremove -y</code> which means remove old or not used kernel, comment it with <code>#</code> at first character if you're not sure your system is bootable with the new kernel.</p> <h2 id="enlarge-file-limit"><a href="#enlarge-file-limit" class="header-anchor">#</a> Enlarge file limit</h2> <p>UNIX/Linux operating systems have the ability to limit the amount of various system resources available to a user process. These limitations include how many files a process can have open, how large of a file the user can create, and how much memory can be used by the different components of the process such as the stack, data and text segments.</p> <p>To enlarge the max number of opened files, use command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/security/limits.conf
</code></pre></div><p>Editing <code>/etc/security/limits.conf</code> and add something like this below.</p> <div class="language- extra-class"><pre class="language-text"><code>*                soft    nofile           512000
*                hard    nofile          1024000
</code></pre></div><p>The <code>soft</code> is for enforcing the soft limits and the <code>hard</code> is for enforcing hard limits. For this both number type is unsigned integer.</p> <h2 id="cmake-multi-cores"><a href="#cmake-multi-cores" class="header-anchor">#</a> CMake multi-cores</h2> <p>Normally we build from source code by <code>sudo make</code>, but it seems always slow in a more awkward way. Let's see the <code>flags</code> by <code>sudo make -h</code>:</p> <div class="language- extra-class"><pre class="language-text"><code>Usage: make [options] [target] ...
Options:
  -b, -m                      Ignored for compatibility.
  -B, --always-make           Unconditionally make all targets.
  -C DIRECTORY, --directory=DIRECTORY
                              Change to DIRECTORY before doing anything.
  -d                          Print lots of debugging information.
  --debug[=FLAGS]             Print various types of debugging information.
  -e, --environment-overrides
                              Environment variables override makefiles.
  --eval=STRING               Evaluate STRING as a makefile statement.
  -f FILE, --file=FILE, --makefile=FILE
                              Read FILE as a makefile.
  -h, --help                  Print this message and exit.
  -i, --ignore-errors         Ignore errors from recipes.
  -I DIRECTORY, --include-dir=DIRECTORY
                              Search DIRECTORY for included makefiles.
  -j [N], --jobs[=N]          Allow N jobs at once; infinite jobs with no arg.
  -k, --keep-going            Keep going when some targets can't be made.
  -l [N], --load-average[=N], --max-load[=N]
                              Don't start multiple jobs unless load is below N.
  -L, --check-symlink-times   Use the latest mtime between symlinks and target.
  -n, --just-print, --dry-run, --recon
                              Don't actually run any recipe; just print them.
  -o FILE, --old-file=FILE, --assume-old=FILE
                              Consider FILE to be very old and don't remake it.
  -O[TYPE], --output-sync[=TYPE]
                              Synchronize output of parallel jobs by TYPE.
  -p, --print-data-base       Print make's internal database.
  -q, --question              Run no recipe; exit status says if up to date.
  -r, --no-builtin-rules      Disable the built-in implicit rules.
  -R, --no-builtin-variables  Disable the built-in variable settings.
  -s, --silent, --quiet       Don't echo recipes.
  -S, --no-keep-going, --stop
                              Turns off -k.
  -t, --touch                 touch targets instead of remaking them.
  --trace                     Print tracing information.
  -v, --version               Print the version number of make and exit.
  -w, --print-directory       Print the current directory.
  --no-print-directory        Turn off -w, even if it was turned on implicitly.
  -W FILE, --what-if=FILE, --new-file=FILE, --assume-new=FILE
                              Consider FILE to be infinitely new.
  --warn-undefined-variables  Warn when an undefined variable is referenced.

This program built for x86_64-pc-linux-gnu
Report bugs to &lt;bug-make@gnu.org&gt;
</code></pre></div><p>Pay attention to <code>-j [N], --jobs[=N]</code>. Normally <code>sudo make -j 4</code> means build using 4 threads as 4 cores. In order to use this feature, we'd better find how many CPU cores do we have by command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">grep</span> -c ^processor /proc/cpuinfo
</code></pre></div><p>Finally we got this command which makes the build process much faster:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span> -z <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> -c ^processor /proc/cpuinfo<span class="token variable">)</span></span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token function">make</span> -j <span class="token variable"><span class="token variable">$(</span><span class="token function">grep</span> -c ^processor /proc/cpuinfo<span class="token variable">)</span></span> <span class="token operator">||</span> <span class="token function">make</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">CC BY-SA 4.0 / Last Updated:</span> <span class="time">1/28/2021, 9:54:53 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/linux/networking/" class="prev">
        Networking
      </a></span> <span class="next"><a href="/design/icon/">
        ICON
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.041ccf91.js" defer></script><script src="/assets/js/2.30d40f56.js" defer></script><script src="/assets/js/21.811b4ca6.js" defer></script><script src="/assets/js/3.9032db0e.js" defer></script>
  </body>
</html>
