<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Software | Unbinilium&#39;s 📖</title>
    <meta name="description" content="Unbinilium&#39;s personal knowledge book">
    <meta name="generator" content="VuePress 1.4.0">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=cover">
  <link rel="manifest" href="/manifest.json" crossorigin="use-credentials">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="icon" href="/favicon.ico">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#fff">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="msapplication-TileColor" content="#fff">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon.png">
    
    <link rel="preload" href="/assets/css/0.styles.4b7e2858.css" as="style"><link rel="preload" href="/assets/js/app.1a1c18e0.js" as="script"><link rel="preload" href="/assets/js/2.f5613a4d.js" as="script"><link rel="preload" href="/assets/js/25.e5cc4252.js" as="script"><link rel="preload" href="/assets/js/3.0f135a11.js" as="script"><link rel="prefetch" href="/assets/js/10.4e211c24.js"><link rel="prefetch" href="/assets/js/11.4de2d28f.js"><link rel="prefetch" href="/assets/js/12.9316d203.js"><link rel="prefetch" href="/assets/js/13.5951b3ce.js"><link rel="prefetch" href="/assets/js/14.adc349e6.js"><link rel="prefetch" href="/assets/js/15.de14786f.js"><link rel="prefetch" href="/assets/js/16.69458723.js"><link rel="prefetch" href="/assets/js/17.d4d4d50a.js"><link rel="prefetch" href="/assets/js/18.7e9a3f9b.js"><link rel="prefetch" href="/assets/js/19.b93e5a39.js"><link rel="prefetch" href="/assets/js/20.5a20d8ae.js"><link rel="prefetch" href="/assets/js/21.14b28521.js"><link rel="prefetch" href="/assets/js/22.4103ef3f.js"><link rel="prefetch" href="/assets/js/23.0310c61b.js"><link rel="prefetch" href="/assets/js/24.988e1c17.js"><link rel="prefetch" href="/assets/js/26.93266c94.js"><link rel="prefetch" href="/assets/js/27.481ab05e.js"><link rel="prefetch" href="/assets/js/28.29ef28f3.js"><link rel="prefetch" href="/assets/js/29.95a736b7.js"><link rel="prefetch" href="/assets/js/30.503d1a49.js"><link rel="prefetch" href="/assets/js/31.0a42eabb.js"><link rel="prefetch" href="/assets/js/32.5a9323af.js"><link rel="prefetch" href="/assets/js/33.6c1aa0e5.js"><link rel="prefetch" href="/assets/js/34.c3aa7093.js"><link rel="prefetch" href="/assets/js/35.86facf3c.js"><link rel="prefetch" href="/assets/js/36.39073e68.js"><link rel="prefetch" href="/assets/js/37.f7e50974.js"><link rel="prefetch" href="/assets/js/38.27d8a2b2.js"><link rel="prefetch" href="/assets/js/39.7d37c475.js"><link rel="prefetch" href="/assets/js/4.6dee130a.js"><link rel="prefetch" href="/assets/js/5.cd27f5b5.js"><link rel="prefetch" href="/assets/js/6.817cc68b.js"><link rel="prefetch" href="/assets/js/7.f3e1032f.js"><link rel="prefetch" href="/assets/js/8.0ca25d1a.js"><link rel="prefetch" href="/assets/js/9.bef03a53.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4b7e2858.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Unbinilium's 📖</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Book
</a></div><div class="nav-item"><a href="https://unbinilium.me/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Book
</a></div><div class="nav-item"><a href="https://unbinilium.me/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Coding</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Programming</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Software</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Linux</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/linux/command/" class="sidebar-link">Command</a></li><li><a href="/linux/networking/" class="sidebar-link">Networking</a></li><li><a href="/linux/optmization/" class="sidebar-link">Optimization</a></li><li><a href="/linux/software/" class="active sidebar-link">Software</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linux/software/#build-shadowsocks" class="sidebar-link">Build Shadowsocks</a></li><li class="sidebar-sub-header"><a href="/linux/software/#build-pytorch" class="sidebar-link">Build PyTorch</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Design</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Writing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Collection</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="build-shadowsocks"><a href="#build-shadowsocks" class="header-anchor">#</a> Build Shadowsocks</h2> <p>With no time updating <a href="https://unbinilium.github.io/Twist" target="_blank" rel="noopener noreferrer">Twist<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, I wrote this extremely simple script to setup shadowsocks-libev both server and client.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">apt-get</span> update -y
<span class="token function">apt-get</span> upgrade -y
<span class="token function">apt-get</span> dist-upgrade -y
<span class="token function">apt-get</span> autoremove -y
<span class="token function">apt-get</span> <span class="token function">install</span> --no-install-recommends -y gettext build-essential autoconf libtool libpcre3-dev asciidoc xmlto libev-dev libc-ares-dev automake golang golang-go fail2ban apache2 <span class="token function">unzip</span> <span class="token function">git</span>
<span class="token function">git</span> clone https://github.com/jedisct1/libsodium --branch master
<span class="token function">pushd</span> libsodium
<span class="token function">bash</span> autogen.sh
./configure --prefix<span class="token operator">=</span>/usr
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
ldconfig
<span class="token function">popd</span>
<span class="token assign-left variable">mbedtlsver</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- https://tls.mbed.org/download-archive <span class="token operator">|</span> <span class="token function">grep</span> -oE <span class="token string">'[0-9]+\.[0-9]+\.[0-9]+'</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">'.'</span> -f1,2,3 <span class="token operator">|</span> <span class="token function">sort</span> -V <span class="token operator">|</span> <span class="token function">tail</span> -1<span class="token variable">)</span></span>&quot;</span>
<span class="token function">wget</span> -t <span class="token number">3</span> -T <span class="token number">30</span> -nv -O mbedtls-<span class="token variable">${mbedtlsver}</span>-gpl.tgz https://tls.mbed.org/download/mbedtls-<span class="token variable">${mbedtlsver}</span>-gpl.tgz
<span class="token function">tar</span> xf mbedtls-<span class="token variable">${mbedtlsver}</span>-gpl.tgz
<span class="token function">pushd</span> mbedtls-<span class="token variable">${mbedtlsver}</span>
<span class="token function">make</span> <span class="token assign-left variable">SHARED</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">CFLAGS</span><span class="token operator">=</span>-fPIC
<span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span>/usr <span class="token function">install</span>
ldconfig
<span class="token function">popd</span>
<span class="token function">git</span> clone https://github.com/shadowsocks/shadowsocks-libev.git
<span class="token function">pushd</span> shadowsocks-libev
<span class="token function">git</span> submodule update --init --recursive
<span class="token function">bash</span> autogen.sh
./configure --disable-documentation
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
ldconfig
<span class="token function">popd</span>
<span class="token function">git</span> clone https://github.com/shadowsocks/simple-obfs.git
<span class="token function">pushd</span> simple-obfs
<span class="token function">git</span> submodule update --init --recursive
./autogen.sh
./configure
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
ldconfig
<span class="token function">popd</span>
<span class="token function">git</span> clone https://github.com/shadowsocks/v2ray-plugin.git
<span class="token function">pushd</span> v2ray-plugin
go get
go build
ldconfig
<span class="token function">popd</span>
<span class="token function">rm</span> -fr libsodium mbedtls-<span class="token variable">${mbedtlsver}</span>-gpl.tgz mbedtls-<span class="token variable">${mbedtlsver}</span> shadowsocks-libev simple-obfs v2ray-plugin
<span class="token function">sleep</span> <span class="token number">3</span>
<span class="token function">reboot</span>
</code></pre></div><p>Server-side configuration should be like this before replaced by customized configuration. It stored in <code>/etc/shadowsocks-libev/config.json</code> by default, we can o edit it by command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/shadowsocks-libev/config.json
</code></pre></div><p>Editing it like this:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;[::0]&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;server_port&quot;</span><span class="token operator">:</span>serverport<span class="token punctuation">,</span>
    <span class="token property">&quot;password&quot;</span><span class="token operator">:</span><span class="token string">&quot;serverpassword&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;encryptmethod&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timeout&quot;</span><span class="token operator">:</span><span class="token number">7200</span><span class="token punctuation">,</span>
    <span class="token property">&quot;udp_timeout&quot;</span><span class="token operator">:</span><span class="token number">7200</span><span class="token punctuation">,</span>
    <span class="token property">&quot;fast_open&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;reuse_port&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;plugin&quot;</span><span class="token operator">:</span><span class="token string">&quot;obfs-server&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;plugin_opts&quot;</span><span class="token operator">:</span><span class="token string">&quot;obfs=tls;fast-open;failover=obfshost:serverport&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nofile&quot;</span><span class="token operator">:</span><span class="token number">512000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nameserver&quot;</span><span class="token operator">:</span><span class="token string">&quot;nameserver1,nameserver2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dscp&quot;</span><span class="token operator">:</span><span class="token string">&quot;EF&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;mode&quot;</span><span class="token operator">:</span><span class="token string">&quot;tcp_and_udp&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;mptcp&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ipv6_first&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;no_delay&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This would be client configuration example which is always stored in <code>/etc/shadowsocks-libev/config.json</code> and you edit it using the same command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/shadowsocks-libev/config.json
</code></pre></div><p>It necessary to replace all the information which matches to your server-side configuration.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;local_port&quot;</span><span class="token operator">:</span><span class="token string">&quot;localport&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span><span class="token string">&quot;serverhost&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;fast_open&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;reuse_port&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nameserver&quot;</span><span class="token operator">:</span><span class="token string">&quot;nameserver1,nameserver2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;mode&quot;</span><span class="token operator">:</span><span class="token string">&quot;tcp_and_udp&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;no_delay&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;server_port&quot;</span><span class="token operator">:</span>serverport<span class="token punctuation">,</span>
    <span class="token property">&quot;password&quot;</span><span class="token operator">:</span><span class="token string">&quot;serverpassword&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;encryptmethod&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;plugin&quot;</span><span class="token operator">:</span><span class="token string">&quot;obfs-local&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;plugin_opts&quot;</span><span class="token operator">:</span><span class="token string">&quot;obfs=tls;fast-open;obfs-host=obfshost&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timeout&quot;</span><span class="token operator">:</span><span class="token number">5</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To start server, it's better to use command <code>systemctl</code>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span> shadowsocks-libev
systemctl start shadowsocks-libev
</code></pre></div><p>And this will set shadowsocks-libev to start while starting system.</p> <p>Staring shadowsocks-libev client is a little different from starting server. Firstly the configuration file should be change by editing it using command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/systemd/system/shadowsocks-libev.service
</code></pre></div><p>Then replace the line matches <code>ExecStart=</code> with:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/ss-local -c <span class="token variable">$CONFFILE</span> <span class="token variable">$DAEMON_ARGS</span>
</code></pre></div><p>Last use the same command as starting server to start shadowsocks-libev client.</p> <p>You can also monitor the status of your server both client by <code>systemctl status shadowsocks-libev</code> and for shadowsocks-libev client it shows like this as <code>ss-local</code>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>shadowsocks-libev.service - Shadowsocks-libev Default Server Service
   Loaded: loaded <span class="token punctuation">(</span>/etc/systemd/system/shadowsocks-libev.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Tue <span class="token number">2019</span>-10-29 09:20:31 CST<span class="token punctuation">;</span> 4h 54min ago
     Docs: man:shadowsocks-libev<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
 Main PID: <span class="token number">890</span> <span class="token punctuation">(</span>ss-local<span class="token punctuation">)</span>
    Tasks: <span class="token number">2</span> <span class="token punctuation">(</span>limit: <span class="token number">9442</span><span class="token punctuation">)</span>
   CGroup: /system.slice/shadowsocks-libev.service
           ├─890 /usr/bin/ss-local -c /etc/shadowsocks-libev/config.json -u
           └─933 obfs-local
</code></pre></div><h2 id="build-pytorch"><a href="#build-pytorch" class="header-anchor">#</a> Build PyTorch</h2> <ul><li><p>Install dependencies</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y libopenblas-dev libblas-dev m4 cmake cython python3-dev python3-yaml python3-setuptools libavutil-dev libavcodec-dev libavformat-dev libswscale-dev
</code></pre></div></li> <li><p>Build PyTorch from the source</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone --recursive https://github.com/pytorch/pytorch
<span class="token function">pushd</span> pytorch
<span class="token function">git</span> submodule update --remote third_party/protobuf
python3 setup.py build
<span class="token function">sudo</span> python3 setup.py <span class="token function">install</span>
</code></pre></div></li> <li><p>Build PyTorch Vision from the source</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone --recursive https://github.com/pytorch/vision
<span class="token builtin class-name">cd</span> vision
python3 setup.py build
<span class="token function">sudo</span> python3 setup.py <span class="token function">install</span>
</code></pre></div></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">CC BY-SA 4.0 / Last Updated:</span> <span class="time">3/19/2020, 6:46:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/linux/optmization/" class="prev">
        Optimization
      </a></span> <span class="next"><a href="/design/icon/">
        ICON
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1a1c18e0.js" defer></script><script src="/assets/js/2.f5613a4d.js" defer></script><script src="/assets/js/25.e5cc4252.js" defer></script><script src="/assets/js/3.0f135a11.js" defer></script>
  </body>
</html>
