<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Networking | Unbinilium&#39;s 📖</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="manifest" href="/manifest.json" crossorigin="use-credentials">
    <link rel="shortcut icon" type="image/png" href="/favicon.png">
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
    <meta name="description" content="Unbinilium's personal knowledge book">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="msapplication-TileColor" content="#fff">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon.png">
    <meta property="og:title" content="Unbinilium's 📖">
    <meta property="og:description" content="Unbinilium's personal knowledge book">
    <meta property="og:url" content="https://xn--vt8h.unbinilium.me/">
    <meta property="og:image" content="https://xn--vt8h.unbinilium.me/open_graph_logo.png">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Unbinilium's 📖">
    
    <link rel="preload" href="/assets/css/0.styles.c86a7820.css" as="style"><link rel="preload" href="/assets/js/app.041ccf91.js" as="script"><link rel="preload" href="/assets/js/2.30d40f56.js" as="script"><link rel="preload" href="/assets/js/20.946ff141.js" as="script"><link rel="preload" href="/assets/js/3.9032db0e.js" as="script"><link rel="prefetch" href="/assets/js/10.469d6b72.js"><link rel="prefetch" href="/assets/js/11.c6524284.js"><link rel="prefetch" href="/assets/js/12.ce88ebf9.js"><link rel="prefetch" href="/assets/js/13.ab2b84d3.js"><link rel="prefetch" href="/assets/js/14.fe038601.js"><link rel="prefetch" href="/assets/js/15.a0555c26.js"><link rel="prefetch" href="/assets/js/16.f55579dd.js"><link rel="prefetch" href="/assets/js/17.ebad19b1.js"><link rel="prefetch" href="/assets/js/18.fadf84da.js"><link rel="prefetch" href="/assets/js/19.43a71af3.js"><link rel="prefetch" href="/assets/js/21.811b4ca6.js"><link rel="prefetch" href="/assets/js/22.4d4a6949.js"><link rel="prefetch" href="/assets/js/23.db0b25e6.js"><link rel="prefetch" href="/assets/js/24.63f564f1.js"><link rel="prefetch" href="/assets/js/25.ef3461c4.js"><link rel="prefetch" href="/assets/js/26.6354f890.js"><link rel="prefetch" href="/assets/js/27.1b44817a.js"><link rel="prefetch" href="/assets/js/28.30ebeba7.js"><link rel="prefetch" href="/assets/js/29.fd0c526c.js"><link rel="prefetch" href="/assets/js/30.3294a55b.js"><link rel="prefetch" href="/assets/js/4.5e92b263.js"><link rel="prefetch" href="/assets/js/5.665901b5.js"><link rel="prefetch" href="/assets/js/6.6ba3b61b.js"><link rel="prefetch" href="/assets/js/7.d31a3cd7.js"><link rel="prefetch" href="/assets/js/8.d4661bf2.js"><link rel="prefetch" href="/assets/js/9.168171d4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c86a7820.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Unbinilium's 📖</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link router-link-active">
  Book
</a></div><div class="nav-item"><a href="https://unbinilium.me/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link router-link-active">
  Book
</a></div><div class="nav-item"><a href="https://unbinilium.me/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Coding</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Programming</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Security</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Software</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Linux</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/linux/command/" class="sidebar-link">Command</a></li><li><a href="/linux/networking/" aria-current="page" class="active sidebar-link">Networking</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linux/networking/#use-proxy-in-commandline" class="sidebar-link">Use proxy in commandline</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linux/networking/#proxy-with-apt" class="sidebar-link">Proxy with apt</a></li><li class="sidebar-sub-header"><a href="/linux/networking/#proxy-with-pip" class="sidebar-link">Proxy with pip</a></li><li class="sidebar-sub-header"><a href="/linux/networking/#proxy-with-git" class="sidebar-link">Proxy with git</a></li><li class="sidebar-sub-header"><a href="/linux/networking/#proxy-with-brew" class="sidebar-link">Proxy with brew</a></li><li class="sidebar-sub-header"><a href="/linux/networking/#disable-commandline-proxy" class="sidebar-link">Disable commandline proxy</a></li><li class="sidebar-sub-header"><a href="/linux/networking/#handy-proxy-with-alias" class="sidebar-link">Handy proxy with alias</a></li></ul></li><li class="sidebar-sub-header"><a href="/linux/networking/#enable-tfo-and-bbr" class="sidebar-link">Enable TFO and BBR</a></li></ul></li><li><a href="/linux/optmization/" class="sidebar-link">Optimization</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Design</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Writing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Collection</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>See Also</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="use-proxy-in-commandline"><a href="#use-proxy-in-commandline" class="header-anchor">#</a> Use proxy in commandline</h2> <p>Usually we got a system based proxy but it not works in command line tools like the terminal. We could easily add such proxy by replacing the proxy information below and run them in terminal.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">http_proxy</span><span class="token operator">=</span>protocol://username:password@proxyhost:port/
<span class="token builtin class-name">export</span> <span class="token assign-left variable">ftp_proxy</span><span class="token operator">=</span>protocol://username:password@proxyhost:port/
<span class="token builtin class-name">export</span> <span class="token assign-left variable">telnet_proxy</span><span class="token operator">=</span>protocol://username:password@proxyhost:port/
</code></pre></div><p>The <code>protocol</code> should be <code>http</code>, <code>https</code> or <code>socks5</code> depends on what type of proxy you are using. Further more, we could add this to <code>~/.*shrc</code> to initialize proxy when terminal start by <code>sudo nano ~/.*shrc</code>.</p> <h3 id="proxy-with-apt"><a href="#proxy-with-apt" class="header-anchor">#</a> Proxy with <code>apt</code></h3> <p>Let <code>apt</code> work with socks5 proxy, add arguments like this</p> <div class="language-bash extra-class"><pre class="language-bash"><code>-o Acquire::http::proxy<span class="token operator">=</span><span class="token string">&quot;protocolh://proxyhost:proxyport/&quot;</span>
</code></pre></div><p>For example:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> -o Acquire::http::proxy<span class="token operator">=</span><span class="token string">&quot;socks5h://127.0.0.1:1080/&quot;</span> update
</code></pre></div><h3 id="proxy-with-pip"><a href="#proxy-with-pip" class="header-anchor">#</a> Proxy with <code>pip</code></h3> <p>Another big problem is using a proxy like <code>socks5</code> in <code>pip</code>, <code>git</code> or even <code>brew</code>, let's have a try. For example, when setting up a socks5 proxy in pip, <code>pysocks</code> is required as a dependency and we add it by:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>pip <span class="token function">install</span> pysocks
</code></pre></div><p>Then we cloud use pip with a socks5 proxy with command formarted like this:</p> <div class="language- extra-class"><pre class="language-text"><code>pip install &lt;yourpacakge&gt; --proxy socks5:proxyhost:port
</code></pre></div><h3 id="proxy-with-git"><a href="#proxy-with-git" class="header-anchor">#</a> Proxy with <code>git</code></h3> <p>Similarly we replace <code>protocol</code> with the proxy type you have to configure git. After that we use git directly, all the data will throught the proxy.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> config --global http.proxy protocol://username:password@proxyhost:port
</code></pre></div><p>You can also try the command below to show all <code>http</code> proxy sections that set globally. If you set as local config then you should drop the <em>argv</em> <code>--global</code> to see the current proxy config in local path.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> config --global --get-regexp http.*
</code></pre></div><h3 id="proxy-with-brew"><a href="#proxy-with-brew" class="header-anchor">#</a> Proxy with <code>brew</code></h3> <p>If you're a macOS user with homebrew, you can try</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">ALL_PROXY</span><span class="token operator">=</span>protocol://username:password@proxyhost:port brew <span class="token function">install</span> <span class="token operator">&lt;</span>yourpackage<span class="token operator">&gt;</span>
</code></pre></div><h3 id="disable-commandline-proxy"><a href="#disable-commandline-proxy" class="header-anchor">#</a> Disable commandline proxy</h3> <p>Finally you cloud easily disable these proxies. For <code>shell</code> in terminal you should remove the proxy settings in <code>~/.*shrc</code> first and restart your terminal, or use <code>unset &lt;name_proxy&gt;</code>. For git you're supposed to clean the configuration by cammand:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> config --global --unset http.proxy
</code></pre></div><h3 id="handy-proxy-with-alias"><a href="#handy-proxy-with-alias" class="header-anchor">#</a> Handy proxy with alias</h3> <p>We simply add this as alias like this(required to replace with your proxy information):</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">alias</span> <span class="token assign-left variable">proxy_enable</span><span class="token operator">=</span><span class="token string">&quot;http_proxy=socks5://127.0.0.1:1080&quot;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">proxy_disable</span><span class="token operator">=</span><span class="token string">&quot;unset http_proxy&quot;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">system_update</span><span class="token operator">=</span><span class="token string">&quot;sudo apt-get -o Acquire::http::proxy=&quot;</span>socks5h://127.0.0.1:1080/<span class="token string">&quot; update&quot;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">system_upgrade</span><span class="token operator">=</span><span class="token string">&quot;sudo apt-get -o Acquire::http::proxy=&quot;</span>socks5h://127.0.0.1:1080/<span class="token string">&quot; dist-upgrade&quot;</span>
</code></pre></div><p>Then just open <em>new BASH</em> window and type <code>system_update</code>, it actually executes:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> -o Acquire::http::proxy<span class="token operator">=</span><span class="token string">&quot;socks5h://127.0.0.1:1080/&quot;</span> update
</code></pre></div><p>And pass all <code>apt</code> traffic through socks5 proxy <code>127.0.0.1:1080</code>.</p> <h2 id="enable-tfo-and-bbr"><a href="#enable-tfo-and-bbr" class="header-anchor">#</a> Enable TFO and BBR</h2> <p>It is required to edit <code>/etc/sysctl.conf</code> by:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/sysctl.conf
</code></pre></div><p>And add the configuration below to the end of the file.</p> <div class="language- extra-class"><pre class="language-text"><code>net.core.default_qdisc = fq
net.ipv4.tcp_congestion_control = bbr
net.ipv4.tcp_fastopen = 3
</code></pre></div><p>This means to config Google BBR and TCP fastopen support on your operation system. Want another choice or check if the Google BBR supported by default, type command</p> <div class="language-bash extra-class"><pre class="language-bash"><code>sysctl net.ipv4.tcp_available_congestion_control
</code></pre></div><p>to show all supported congestion control modules.</p> <p>Use <code>sudo sysctl -p</code> to apply the changes to your operating system. Check if BBR module is installed in kernel use <code>lsmod | grep bbr</code> and find if string <code>bbr</code> is in outputs.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">CC BY-SA 4.0 / Last Updated:</span> <span class="time">1/28/2021, 9:54:53 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/linux/command/" class="prev">
        Command
      </a></span> <span class="next"><a href="/linux/optmization/">
        Optimization
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.041ccf91.js" defer></script><script src="/assets/js/2.30d40f56.js" defer></script><script src="/assets/js/20.946ff141.js" defer></script><script src="/assets/js/3.9032db0e.js" defer></script>
  </body>
</html>
